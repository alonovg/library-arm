
# АРМ Помощник библиотекаря
Данный проект выполнен как Тестовое задание на должность "Прикладной разработчик"

### Постановка задачи
В рамках настоящего задания необходимо разработать приложение АРМ Помощник библиотекаря. Приложение должно позволять выяснить:
- Какие книги есть в библиотеке;
- Когда и кто брал книгу;
- Где и у кого книга находится сейчас.
Приложение должно состоять из двух частей: база данных и приложение для пользователя.

#### База данных
Необходимо разработать базу данных «Библиотека», в которой должна быть размещена информация об Авторах, Книгах, Читателях и Фактах взятия-возвращения книг. База данных должна быть составлена таким образом, чтобы можно было получить информацию о любой книге (нахождение её в библиотеке или у кого-то из читателей) на любой момент времени.

#### Программа
Написать программу, которая будет подключаться к базе данных «Библиотека» и добавлять данные или выводить текстовые отчеты (в файл или консоль).
В начале работы пользователю необходимо предоставить выбор:
1. Добавить/Удалить/Изменить книгу;
2. Добавить/Удалить/Изменить пользователя;
3. Добавить Факт взятия/возврата книги
4. Просмотр отчетов следующего содержания:
- Сколько книг есть в библиотеке, сколько читателей;
- Сколько книг брал каждый читатель за все время;
- Сколько книг сейчас находится на руках у каждого читателя;
- Дата последнего посещения читателем библиотеки;
- Самый читаемый автор;
- Самый предпочитаемые читателями жанры по убыванию;
- Любимый жанр каждого читателя;

#### Дополнительное задание: 
добавить в БД информацию о ожидаемой дате возврата книги и позволить пользователю (библиотекарю) формировать отчет обо всех пользователях и книгах, которые они не вернули вовремя. Отчет вывести в файл для последующей печати.






## Installation

```python
git clone https://github.com/alonovg/library-arm.git
docker compose build
docker compose up
```


## Ручной запуск
With Poerty:
```python
poetry install
```
Default pip:
```python
pip install -r requirements.txt
```
Make migration:
```python
alembic upgrade head
```
For run:
```python
uvicorn app.main:app
```
Run gunicorn (if Linux OS/Prod):
```python
gunicorn app.main:app --workers 2 --worker-class uvicorn.workers.UvicornWorker --bind=0.0.0.0:8000
```

## Documentation

[Swagger](http://127.0.0.1:9000/docs#/)

[ReDoc](http://127.0.0.1:9000/redoc/)

[User Interface](http://127.0.0.1:9000/ui/)

[Admin panel](http://127.0.0.1:9000/admin/)

Port: 9000

Для заполнения БД тестовыми данными, 2 варианта:
1. Первый:
- Зайти на /docs, выполнить GET запрос (Создает изначальный набор данных Перед созданием ВСЕ созданные вами данные будут удалены):
```http
  GET /administration/create_dataset
```
- Выполнить регистрацию (Можно пропустить, при условии логина под данными: admin@admin.net:admin):
```http
  POST /auth/register
```
- Выполнить аутентификацию:
```http
  POST /auth/login
```
2. Второй:
- Запустить app/database/db_pull.py
```python
  py db_pull.py
```
- Следовать пунктам, в зависимости что необходимо сделать:
```python
              Please select:
            1. CREATE DB
            2. CREATE TEST DB
            3. Create table in DB: {DB_NAME}
            4. Insert data in DB: {DB_NAME}
            5. DELETE DB
            6. DELETE TEST DB
            For exit type any char and press enter....
```